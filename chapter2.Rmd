--- 
title_meta  : Chapter 2
title       : Statistical testing
description : "In this chapter, you will learn what does statistical significance mean and learn to crosstabulate and run some useful statistical tests, such as chi square and t-test."
 
--- type:NormalExercise lang:r xp:100 skills:1 key:ex2point1
## Hands on
 
Although in these days we have many tools for calculation and programming, it is good to understand the theory that lies behind R functions for example. t-test is quite a simple procedure and now we are going to learn how to run it without using the function that R offers.
 
*** =instructions
 - Find out whether there is a difference between men and women in basal heart rate by using t-test
    - Imagine we have a sample of 10 (n=10) people, 4 of which are women and 6 men  
    - Mean of women's basal heart rate is 78.5 and standard deviation is 6.65
    - Mean of men's basal heart rate is 75.67 and standard deviation is 20.93
    - The chosen significance level is 0.05
 - You can find the t-distribution table on the course Moodle page or from the internet, just type 't distribution table' on google.
 - You will need to check the degrees of freedom (df) in order to use the distribution table (n1 + n2 - 2) 
 
*** =hint
Remember to use all necessary brackets. Square root in R is sqrt()
 
*** =pre_exercise_code
```{r}
 # no pec
```
 
*** =sample_code
```{r}
# Assign the number of women to n1 and number of men to n2
n1 <-
n2 <-
 
# Assign the mean value of basal heart rate of women to mean1 and standard deviation to sd1
mean1 <-
sd1 <-
 
# Do similarly to men
 
 
# Now remember how to calculate the t-value? 
# If not, you can revise it from the course material or from the internet.
# Remember that variance is squared standard deviation.
# Now just calculate it here below and print the value
t <- 
t

# Calculate the degrees of freedom and print the value
df <- 
df

# Search for the right value from the distribution table
# The value is: 

# Does this support the alternative hypothesis (on significance level 0.05)? (Answer YES if yes and NO if no)
# Your answer: 
```
 
*** =solution
```{r}
# Assign the number of women to n1 and number of men to n2
n1 <- 4
n2 <- 6
 
# Assign the mean value of basal heart rate of women to mean1 and standard deviation to sd1
mean1 <- 78.5
sd1 <- 6.65
 
# Do similarly to men
mean2 <- 75.67
sd2 <- 20.93
 
# Now remember how to calculate the t-value? 
# If not, you can revise it from the course material or from the internet.
# Remember that variance is squared standard deviation.
# Now just calculate it here below
t <- (mean1 - mean2) / (sqrt(((sd1^2) / n1) + ((sd2^2) / n2)))
t

# Calculate the degrees of freedom
df <- n1 + n2 - 2
df

# Search for the right value from the distribution table
# The value is: 1.860

# Does this support the alternative hypothesis (on significance level 0.05)? (Answer YES if yes and NO if no)
# Your answer: NO
```
 
*** =sct
```{r}
test_student_typed("n1 <- 4", not_typed_msg = "Make sure you entered the right values given in the exercise.")
test_student_typed("mean1 <- 78.5", not_typed_msg = "Make sure you entered the right values given in the exercise.")
test_student_typed("sd1 <- 6.65", not_typed_msg = "Make sure you entered the right values given in the exercise.")
test_student_typed("mean2 <- 75.67", not_typed_msg = "Make sure you entered the right values given in the exercise.")
test_student_typed("sd2 <- 20.93", not_typed_msg = "Make sure you entered the right values given in the exercise.")
test_output_contains("0.3086563", incorrect_msg = "Make sure that you have studied well the formula for the t-value.")
test_output_contains("8", incorrect_msg = "Are you sure you calculated the degrees of freedom correctly?")
test_student_typed("1.86", not_typed_msg = "Are you sure you looked at the right spot on the distribution table?")
test_student_typed("NO", not_typed_msg = "Perhaps you need to check again how to interpret your results.")
success_msg("t-test seems to be your cup of tea! You know the name actually originates from the lady who was convinced she can taste whether the milk or the tea was poured first on her teacup?")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:cb2334e4d3
## Barplots and histograms
 
When taking a first look at the data it is often good to visualize the variables. This is how you get the first idea of their distributions and can spot the possible outliers (Outliers are the kind of values that are very different from the other values.) 
 
*** =instructions
 - Find out how many observations does the cardiac-data contain. 
 - Find out how many observations does the diabetes-data contain.
 - Draw a barplot of the variable 'gender' in diabetes-dataset.
 - Draw a histogram of the variable 'age' in cardiac-dataset.

*** =hint

 
*** =pre_exercise_code
```{r}
cardiac<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Cardiac.txt",header=T,row.names=1)
diabetes<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Diabetes.txt",header=TRUE,row.names=1)
```
 
*** =sample_code
```{r}
# Draw a barplot of the variable 'gender' in cardiac-dataset
 
barplot(table(cardiac$gender))
 
# Draw a histogram of the variable 'cholmmol' (cholesterol in mmol) in diabetes-dataset
 
hist(diabetes$cholmmol)
 
# Draw a barplot of the variable 'gender' in diabetes-dataset
 

 
# Draw a histogram of the variable 'age' in cardiac-dataset
 
 
```
 
*** =solution
```{r}
# Draw a barplot of the variable 'gender' in diabetes-dataset
 
barplot(table(diabetes$gender))
 
# Draw a barplot of the variable 'age' in cardiac-dataset
hist(cardiac$age)
```
 
*** =sct
```{r}
test_student_typed("barplot(table(diabetes$gender))", not_typed_msg = "Make sure that you have added the table-command inside the barplot-command.")
test_student_typed("hist(cardiac$age)", not_typed_msg = "Make sure that you have not made any spelling mistakes.")
success_msg("Awesome! You old plotting wizard!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:1c76838a8c
## Making plots more fancy
 
Plots are cooler with some colours in it. Title is a good way to tell people what the plot is about.

*** =hint
Just add the title and colour options inside the plotting code, just like in the example.
 
*** =pre_exercise_code
```{r}
cardiac<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Cardiac.txt",header=T,row.names=1)
diabetes<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Diabetes.txt",header=TRUE,row.names=1)
```
 
*** =sample_code
```{r}
# Draw a barplot of the variable 'gender' in cardiac-dataset. Add a title and colour to you plot.
 
barplot(table(cardiac$gender),main="Gender in cardiac-dataset",col="tomato")

# Draw a barplot of the variable 'gender' in diabetes-dataset. Add a title and colour to you plot.
 

 
# Draw a histogram of the variable 'age' in cardiac-dataset. Add a title and colour to you plot.
 
 
```
 
*** =solution
```{r}
# Draw a barplot of the variable 'gender' in diabetes-dataset
 
barplot(table(diabetes$gender),main="Gender",col="blue")
 
# Draw a barplot of the variable 'age' in cardiac-dataset
hist(cardiac$age,main="Age",col="hotpink")
```
 
*** =sct
```{r}
test_function("barplot",args=c("main","col"), incorrect_msg = "Did you enter both title and colour options?")
test_function("hist",args=c("main","col"), incorrect_msg = "Did you enter both title and colour options?")
success_msg("Oh your plots look just fabulous!")
```

