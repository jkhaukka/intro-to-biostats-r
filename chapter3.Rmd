--- 
title_meta  : Chapter 3.1
title       : Linear regression
description : "This weeks exercises will focus on linear regression. You will form a few models yourself and train to interpret the results from those models. You will also learn to evaluate the assumptions of the models."
 
--- type:NormalExercise lang:r xp:100 skills:1 key:3d083aaefb
## Fist model with one explanatory variable
 
In the box below you can see the instructions for the exercise. On the right in the upper window you can type your code. That window is called editor. You can execute the code by pressing Ctr+Enter (Cmd+Enter in Mac) when the cursor is on the same line with your command. If your command is on multiple lines you must select all those rows and then Ctrl+Enter or Cmd+Enter. When you run your commands, the results appear in the window under the editor. That window is called console.
 
You can use R as a calculator. You can run basic mathematical operations like this: 
 
- Addition: `+`
- Subtraction: `-`
- Multiplication: `*`
- Division: `/`
- Exponentiation: `^`
 
In order to understand better your own code, or in case you want to save it as an actual R script (It is possible if you have R installed in your computer.) it is good to comment on your code. That can be done by typing `#` at the beginning of the row. Any text you type on that row will be considered as a comment. For example _Calculate the mean of these numbers: 1, 3, 8, 10, 12_ in the editor window is a comment.
 
*** =instructions
 Form a linear regression model, in which you will have systolic blood pressure (sbp) as an outcome variable and age as an explanatory variable. Use the Cardiac-data. 
 Interpret the results: 
 - What is the regression coefficient?
 - What is the intercept?
 - What is the variance explained?
 
*** =hint
Use formula lm(data$outcome~data$explanatory). To show the results, use summary-fucntion. 
 
*** =pre_exercise_code
```{r}
cardiac<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Cardiac.txt",header=T,row.names=1)
diabetes<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Diabetes.txt",header=TRUE,row.names=1)
```
 
*** =sample_code
```{r}
# Form the model

# Check the results

# Regression coefficient

# Intercept

# Variance explained

```
 
*** =solution
```{r}
reg1<-lm(cardiac$sbp~cardiac$age)
summary(reg1)
# Regression coefficient
-0.2203
# Intercept
161.7502
# Variance explained
0.00349
```
 
*** =sct
```{r}
test_output_contains("lm(cardiac$sbp~cardiac$age", incorrect_msg = "Make sure you have put the variables in the right order, and they are divided by the ~ sign.")
test_output_contains("summary(", incorrect_msg = "Make sure you have used the summary-function to see the results.")

```

--- type:NormalExercise lang:r xp:100 skills:1 key:harj32
## Linear regression with multiple explanatory variables
 
In the previous exercise you made a linear regression using one explanatory variables. In this exercise you will add explanatory variables. 
 
*** =instructions
 Form a linear regression model, in which you will have systolic blood pressure (sbp) as an outcome variable and age, sex and ejection fraction (baseEF) as an explanatory variable. Use the Cardiac-data. 
 Interpret the results: 
 - What is the regression coefficient?
 - What is the intercept?
 - What is the variance explained?
 
*** =hint
Use formula lm(data$outcome~data$explanatory1+data$explanatory2+ etc).  
 
*** =pre_exercise_code
```{r}
cardiac<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Cardiac.txt",header=T,row.names=1)
diabetes<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Diabetes.txt",header=TRUE,row.names=1)
```
 
*** =sample_code
```{r}
# Form the model

# Check the results

# Regression coefficient for age

# Regression coefficient for sex

# Regression coefficient for ejection fraction

# Intercept for age

# Variance explained

```
 
*** =solution
```{r}
reg1<-lm(cardiac$sbp~cardiac$age+cardiac$gender+cardiac$baseEF)
summary(reg1)
# Regression coefficient for age
-0.2219
# Regression coefficient for gender
-0.1973
# Regression coefficient for ejection fraction
0.4314
# Intercept
137.9916
# Variance explained
0.001469
```
 
*** =sct
```{r}
test_output_contains("lm(cardiac$sbp~cardiac$age+cardiac$gender+cardiac$baseEF)", incorrect_msg = "Make sure you have typed all the variables separated by + sign, and their names correctly. ")
test_output_contains("summary("", incorrect_msg = "Make sure you have used the summary-function to see the results.")

```
