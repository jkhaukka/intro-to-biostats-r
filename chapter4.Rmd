--- 
title_meta  : Chapter 4
title       : Odds ratio (OR) and risk ratio (RR)
description : "In this week's exercises you will learn how to predict risks, calculate odds and risk ratios and run a logistic regression."
 
--- type:NormalExercise lang:r xp:100 skills:1 key: harj41
## Crosstabulations
 
You already probably know that a good way to start to discover the relationship between two discrete variables is to crosstabulate them. By looking at the crosstabulation between two dicotomous variables, you can see in one glimpse when these two are present together and separately. That's what makes it such a nice tool for looking at the relationship between a certain disease and a possible risk factor. 

Once the crosstabulation is done, it's good to calculate some numbers too. Odds ratio tells you how powerfully a phenomenon presents with another phenomenon whereas risk ratio tells you how probable it is that when a phenomenon is present, also the other phenomenon is present.
 
 
*** =instructions
 - Use cardiac dataset. Crosstabulate event and restwma. Make sure that you have included row and column sums. 
 - Calculate the odds ratio. 
 - Calculate the risk ratio. 
 
*** =hint
Try to form the table command one step at a time: First create a table, then add the sums and then look at the resulting table.
 
*** =pre_exercise_code
```{r}
cardiac<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostats-r/master/Cardiac.txt",header=T,sep="")
diabetes<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostats-r/master/Diabetes.txt",header=T,sep="")
```
 
*** =sample_code
```{r}
# cardiac-data is available
# diabetes-data is available
 
# Crosstabulation
 

 
# Calculate the odds ratio


 
# Calculate the risk ratio
 

```
 
*** =solution
```{r}
# Crosstabulation

table1 <- with(cardiac,table(event,restwma))
 
# Calculate the odds ratio

(74/15)/(227/242)
 
# Calculate the risk ratio

(74/301)/(15/257)

```
 
*** =sct
```{r}
test_output_contains("event", incorrect_msg = "Make sure you used the right variables.")
test_output_contains("restwma", incorrect_msg = "Make sure you used the right variables.")
test_output_contains("Total", incorrect_msg = "Make sure you used the right variables.")
test_output_contains("5.259325", incorrect_msg = "Make sure you used the right variables.")
test_output_contains("4.212182", incorrect_msg = "Make sure you used the right variables.")
success_msg("Well done!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:cb2334e4d3
## Barplots and histograms
 
When taking a first look at the data it is often good to visualize the variables. This is how you get the first idea of their distributions and can spot the possible outliers (Outliers are the kind of values that are very different from the other values.) 
 
*** =instructions
 - Find out how many observations does the cardiac-data contain. 
 - Find out how many observations does the diabetes-data contain.
 - Draw a barplot of the variable 'gender' in diabetes-dataset.
 - Draw a histogram of the variable 'age' in cardiac-dataset.

*** =hint
Checking the dimensions of the dataset is a good way to find out how many observations are there. 
Remember to connect variables to the dataset with a '$' sign.
 
*** =pre_exercise_code
```{r}
cardiac<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Cardiac.txt",header=T,row.names=1)
diabetes<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Diabetes.txt",header=TRUE,row.names=1)
```
 
*** =sample_code
```{r}
# Draw a barplot of the variable 'gender' in cardiac-dataset
 
barplot(table(cardiac$gender))
 
# Draw a histogram of the variable 'cholmmol' (cholesterol in mmol) in diabetes-dataset
 
hist(diabetes$cholmmol)
 
# Draw a barplot of the variable 'gender' in diabetes-dataset
 

 
# Draw a histogram of the variable 'age' in cardiac-dataset
 
 
```
 
*** =solution
```{r}
# Draw a barplot of the variable 'gender' in diabetes-dataset
 
barplot(table(diabetes$gender))
 
# Draw a barplot of the variable 'age' in cardiac-dataset
hist(cardiac$age)
```
 
*** =sct
```{r}
test_student_typed("barplot(table(diabetes$gender))", not_typed_msg = "Make sure that you have added the table-command inside the barplot-command.")
test_student_typed("hist(cardiac$age)", not_typed_msg = "Make sure that you have not made any spelling mistakes.")
success_msg("Awesome! You old plotting wizard!")
```

--- type:NormalExercise lang:r xp:100 skills:1 key:1c76838a8c
## Making plots more fancy
 
Plots are cooler with some colours in it. Title is a good way to tell people what the plot is about.

*** =hint
Just add the title and colour options inside the plotting code, just like in the example.
 
*** =pre_exercise_code
```{r}
cardiac<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Cardiac.txt",header=T,row.names=1)
diabetes<-read.table("https://raw.githubusercontent.com/paulabergman/intro-to-biostatistics-with-r/master/Diabetes.txt",header=TRUE,row.names=1)
```
 
*** =sample_code
```{r}
# Draw a barplot of the variable 'gender' in cardiac-dataset. Add a title and colour to you plot.
 
barplot(table(cardiac$gender),main="Gender in cardiac-dataset",col="tomato")

# Draw a barplot of the variable 'gender' in diabetes-dataset. Add a title and colour to you plot.
 

 
# Draw a histogram of the variable 'age' in cardiac-dataset. Add a title and colour to you plot.
 
 
```
 
*** =solution
```{r}
# Draw a barplot of the variable 'gender' in diabetes-dataset
 
barplot(table(diabetes$gender),main="Gender",col="blue")
 
# Draw a barplot of the variable 'age' in cardiac-dataset
hist(cardiac$age,main="Age",col="hotpink")
```
 
*** =sct
```{r}
test_function("barplot",args=c("main","col"), incorrect_msg = "Did you enter both title and colour options?")
test_function("hist",args=c("main","col"), incorrect_msg = "Did you enter both title and colour options?")
success_msg("Oh your plots look just fabulous!")
```
